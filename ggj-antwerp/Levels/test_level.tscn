[gd_scene format=3 uid="uid://65q44q0dbmqb"]

[ext_resource type="Script" uid="uid://yqfc3oj0n4dr" path="res://Levels/level.gd" id="1_4k50d"]
[ext_resource type="PackedScene" uid="uid://bguakiop7e1g6" path="res://RoomProps/Cupboard/cupboard.tscn" id="1_ormqy"]
[ext_resource type="Texture2D" uid="uid://b063ombnqrg16" path="res://Background/background_art.JPG" id="2_3158n"]
[ext_resource type="Texture2D" uid="uid://d3p2bt1lm7146" path="res://Background/conceptartver2.jpg" id="3_lrol0"]
[ext_resource type="PackedScene" uid="uid://cpvhaerxj7c5v" path="res://RoomProps/SmallCupboard/small_cupboard.tscn" id="4_i4ak4"]
[ext_resource type="Script" uid="uid://e1m7euobwhi0" path="res://Levels/camera.gd" id="6_pvdih"]
[ext_resource type="PackedScene" uid="uid://bbklm8wlq8pm5" path="res://RoomProps/Lamp/lamp.tscn" id="6_ub4j8"]
[ext_resource type="Texture2D" uid="uid://dyhdq4yf5c4bx" path="res://RoomProps/Bed/bed.PNG" id="8_7e6fp"]
[ext_resource type="Script" uid="uid://cnl6tm1uyd2ef" path="res://Levels/ui.gd" id="10_dkv23"]
[ext_resource type="Texture2D" uid="uid://ca3cap763d6l2" path="res://UI/UI_platter.PNG" id="11_lx7qo"]
[ext_resource type="Texture2D" uid="uid://n26t4i0pqk5p" path="res://UI/phone_ringing_spritesheet.png" id="11_x458k"]
[ext_resource type="Theme" uid="uid://dms6ae12htitg" path="res://UI/new_theme.tres" id="13_524xy"]
[ext_resource type="Texture2D" uid="uid://cks0s2ow33l2g" path="res://Score/ProgressionCutscene/frame0.PNG" id="13_y77ci"]
[ext_resource type="PackedScene" uid="uid://c4yklctynysay" path="res://RoomProps/Window/window.tscn" id="14_lrol0"]
[ext_resource type="PackedScene" uid="uid://bitavwau88anq" path="res://SuspectObjects/Blood/blood_spawner.tscn" id="14_x458k"]
[ext_resource type="Texture2D" uid="uid://d1pvafssin03k" path="res://Score/ProgressionCutscene/frame1.PNG" id="15_524xy"]
[ext_resource type="Texture2D" uid="uid://dprrofkb675g2" path="res://Score/ProgressionCutscene/frame2.PNG" id="16_qmhwg"]
[ext_resource type="Texture2D" uid="uid://cal3tbtuq3vk7" path="res://Score/ProgressionCutscene/frame3.PNG" id="17_y8lus"]
[ext_resource type="Texture2D" uid="uid://cofgry1c244ft" path="res://Score/ProgressionCutscene/frame4.PNG" id="18_pcblp"]
[ext_resource type="Texture2D" uid="uid://d1konhs5k0nvq" path="res://Score/ProgressionCutscene/frame5.PNG" id="19_7hwld"]
[ext_resource type="Texture2D" uid="uid://dp05qj6os7uia" path="res://Score/ProgressionCutscene/frame6.PNG" id="20_k7ebw"]
[ext_resource type="Texture2D" uid="uid://bl4uidyw7k8uy" path="res://Score/ProgressionCutscene/frame7.PNG" id="21_6tabg"]
[ext_resource type="Texture2D" uid="uid://dwpl1uqp3wb6f" path="res://Score/ProgressionCutscene/frame8.PNG" id="22_ag5ov"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_i4ak4"]
size = Vector2(2722, 20)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dkv23"]
size = Vector2(24, 1266)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_x458k"]
size = Vector2(24, 1266)

[sub_resource type="AtlasTexture" id="AtlasTexture_lrol0"]
atlas = ExtResource("11_x458k")
region = Rect2(0, 0, 254, 0)

[sub_resource type="Animation" id="Animation_ouwm7"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Control/CallButton:texture_normal:region")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Rect2(0, 0, 254, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Control/Platter:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1127, 1112)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Control/CallButton:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_662sx"]
resource_name = "call"
length = 0.3
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Control/CallButton:texture_normal:region")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.099999994, 0.19999999),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [Rect2(0, 0, 254, 0), Rect2(254, 0, 254, 0), Rect2(508, 0, 254, 0)]
}

[sub_resource type="Animation" id="Animation_x458k"]
resource_name = "hide_platter"
length = 1.5
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Control/Platter:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(3.0314333, 1),
"update": 0,
"values": [Vector2(1127, 510), Vector2(1127, 1112)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Control/CallButton:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(1.5),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_dkv23"]
resource_name = "raise_platter"
length = 1.5
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Control/Platter:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.39999998, 1.5),
"transitions": PackedFloat32Array(0.3789293, 1),
"update": 0,
"values": [Vector2(1127, 1112), Vector2(1127, 510)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Control/CallButton:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.39999998),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_cn5b1"]
_data = {
&"RESET": SubResource("Animation_ouwm7"),
&"call": SubResource("Animation_662sx"),
&"hide_platter": SubResource("Animation_x458k"),
&"raise_platter": SubResource("Animation_dkv23")
}

[sub_resource type="Animation" id="Animation_cn5b1"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/Control/EndColor:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CanvasLayer/Control/TextureRect:texture")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [null]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("CanvasLayer/Control/Stats:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_lrol0"]
resource_name = "level_ended"
length = 3.0
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/Control/EndColor:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"update": 0,
"values": []
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CanvasLayer/Control/TextureRect:texture")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.2999998, 1.3999999, 1.4999999, 1.5999999, 1.6999999, 1.8, 1.8999999, 1.9999999, 2.1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [null, ExtResource("13_y77ci"), ExtResource("15_524xy"), ExtResource("16_qmhwg"), ExtResource("17_y8lus"), ExtResource("18_pcblp"), ExtResource("19_7hwld"), ExtResource("20_k7ebw"), ExtResource("21_6tabg"), ExtResource("22_ag5ov")]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("CanvasLayer/Control/Stats:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_i45ex"]
resource_name = "level_start"
length = 1.5
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/Control/EndColor:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0, 0, 0, 1), Color(0, 0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_524xy"]
resource_name = "transition"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CanvasLayer/Control/EndColor:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.99999994),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0, 0, 0, 0), Color(0, 0, 0, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ouwm7"]
_data = {
&"RESET": SubResource("Animation_cn5b1"),
&"level_ended": SubResource("Animation_lrol0"),
&"level_start": SubResource("Animation_i45ex"),
&"transition": SubResource("Animation_524xy")
}

[node name="TestLevel" type="Node2D" unique_id=954476652]
script = ExtResource("1_4k50d")
CURSOR_CLICK_DURATION = 0.1
metadata/_edit_vertical_guides_ = [2214.0, -220.0]
metadata/_edit_horizontal_guides_ = [880.0]

[node name="Background" type="Sprite2D" parent="." unique_id=2096200054]
position = Vector2(-219, 1)
texture = ExtResource("2_3158n")
centered = false

[node name="Window" parent="." unique_id=1269573547 instance=ExtResource("14_lrol0")]
position = Vector2(219, 184)

[node name="Bed" type="Sprite2D" parent="." unique_id=916855565]
position = Vector2(768, 575.00006)
scale = Vector2(1.0376925, 1.0376924)
texture = ExtResource("8_7e6fp")

[node name="BloodSpawner" parent="." unique_id=1721568591 node_paths=PackedStringArray("wall_polygons", "floor_polygons") instance=ExtResource("14_x458k")]
wall_polygons = [NodePath("Polygon2D"), NodePath("Polygon2D3"), NodePath("Polygon2D4")]
floor_polygons = [NodePath("Polygon2D2"), NodePath("Polygon2D5")]

[node name="Polygon2D" type="Polygon2D" parent="BloodSpawner" unique_id=1547162698]
polygon = PackedVector2Array(928, 56, 1208, 56, 1216, 360, 920, 368)

[node name="Polygon2D3" type="Polygon2D" parent="BloodSpawner" unique_id=1023494314]
polygon = PackedVector2Array(288, 576, 1184, 568, 1184, 664, 288, 656)

[node name="Polygon2D4" type="Polygon2D" parent="BloodSpawner" unique_id=646306848]
polygon = PackedVector2Array(304, 720, 1040, 720, 1040, 848, 312, 832)

[node name="Polygon2D2" type="Polygon2D" parent="BloodSpawner" unique_id=1626194439]
polygon = PackedVector2Array(-168, 920, 1048, 928, 1048, 1032, -160, 1024)

[node name="Polygon2D5" type="Polygon2D" parent="BloodSpawner" unique_id=221296490]
polygon = PackedVector2Array(1800, 896, 2128, 896, 2128, 1016, 1800, 1016)

[node name="Cupboard" parent="." unique_id=557903057 instance=ExtResource("1_ormqy")]
position = Vector2(1648, 464)

[node name="Ground" type="StaticBody2D" parent="." unique_id=1874029759]
position = Vector2(-216, 1064)
collision_layer = 32
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="Ground" unique_id=1775641596]
position = Vector2(1351, 0)
shape = SubResource("RectangleShape2D_i4ak4")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="Ground" unique_id=411038745]
position = Vector2(1328, -1080)
shape = SubResource("RectangleShape2D_i4ak4")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Ground" unique_id=1569113393]
position = Vector2(2436, -535)
shape = SubResource("RectangleShape2D_dkv23")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Ground" unique_id=560233921]
position = Vector2(-16, -584)
shape = SubResource("RectangleShape2D_x458k")

[node name="Lamp" parent="." unique_id=87523742 instance=ExtResource("6_ub4j8")]
position = Vector2(184, 297)

[node name="SmallCupboard" parent="." unique_id=152157778 instance=ExtResource("4_i4ak4")]
position = Vector2(8, 640)

[node name="Camera2D" type="Camera2D" parent="." unique_id=864356312 node_paths=PackedStringArray("left_pan_marker", "right_pan_marker")]
anchor_mode = 0
script = ExtResource("6_pvdih")
bounds = Vector2(-220, 2210)
left_pan_marker = NodePath("PanL")
right_pan_marker = NodePath("PanR")

[node name="PanL" type="Marker2D" parent="Camera2D" unique_id=1231657832]
position = Vector2(64, 0)

[node name="PanR" type="Marker2D" parent="Camera2D" unique_id=762008711]
position = Vector2(1856, 0)

[node name="CanvasLayer" type="CanvasLayer" parent="." unique_id=649908782]
script = ExtResource("10_dkv23")

[node name="Control" type="Control" parent="CanvasLayer" unique_id=297298772]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="CallButton" type="TextureButton" parent="CanvasLayer/Control" unique_id=1718897906]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -128.0
offset_top = -128.0
grow_horizontal = 0
grow_vertical = 0
texture_normal = SubResource("AtlasTexture_lrol0")

[node name="Platter" type="TextureRect" parent="CanvasLayer/Control" unique_id=235565738]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -793.0
offset_top = 32.0
offset_bottom = 602.00024
grow_horizontal = 0
grow_vertical = 0
texture = ExtResource("11_lx7qo")

[node name="SpongeButton" type="Button" parent="CanvasLayer/Control/Platter" unique_id=347079497]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -512.0
offset_top = -552.0
offset_right = -288.0
offset_bottom = -320.0
grow_horizontal = 0
grow_vertical = 0

[node name="RopeButton" type="Button" parent="CanvasLayer/Control/Platter" unique_id=408348396]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -744.0
offset_top = -554.00024
offset_right = -520.0
offset_bottom = -322.00024
grow_horizontal = 0
grow_vertical = 0

[node name="BellButton" type="Button" parent="CanvasLayer/Control/Platter" unique_id=276253687]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -288.0
offset_top = -554.00024
offset_right = -64.0
offset_bottom = -322.00024
grow_horizontal = 0
grow_vertical = 0

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Control" unique_id=696881735]
root_node = NodePath("../..")
libraries/ = SubResource("AnimationLibrary_cn5b1")

[node name="LampColor" type="ColorRect" parent="CanvasLayer/Control" unique_id=1009315460]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0, 0, 0.05882353, 0.44705883)

[node name="TextureRect" type="TextureRect" parent="CanvasLayer/Control" unique_id=1333068000]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="Stats" type="VBoxContainer" parent="CanvasLayer/Control" unique_id=2135337708]
visible = false
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -256.0
offset_top = -420.0
offset_right = 256.0
offset_bottom = 276.0
grow_horizontal = 2
grow_vertical = 2

[node name="Score" type="Label" parent="CanvasLayer/Control/Stats" unique_id=2094464835]
layout_mode = 2
size_flags_horizontal = 4
theme = ExtResource("13_524xy")
theme_override_font_sizes/font_size = 60
text = "SCORE:"

[node name="Message" type="Label" parent="CanvasLayer/Control/Stats" unique_id=662777912]
custom_minimum_size = Vector2(0, 100)
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 2
theme = ExtResource("13_524xy")
text = "Good Job"
vertical_alignment = 1

[node name="Stains" type="Label" parent="CanvasLayer/Control/Stats" unique_id=1546210040]
visible = false
layout_mode = 2
theme = ExtResource("13_524xy")
text = "Blood stains left:"

[node name="Continue" type="Button" parent="CanvasLayer/Control/Stats" unique_id=1381887389]
layout_mode = 2
size_flags_vertical = 10
theme = ExtResource("13_524xy")
text = "CONTINUE"

[node name="EndColor" type="ColorRect" parent="CanvasLayer/Control" unique_id=18978606]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(1, 1, 1, 0)

[node name="ConceptArt" type="Sprite2D" parent="." unique_id=21262659]
visible = false
position = Vector2(997, 541)
texture = ExtResource("3_lrol0")

[node name="LevelAnimations" type="AnimationPlayer" parent="." unique_id=1312470742]
libraries/ = SubResource("AnimationLibrary_ouwm7")
autoplay = &"level_start"

[node name="Bodies" type="Node2D" parent="." unique_id=243719347]

[connection signal="pressed" from="CanvasLayer/Control/CallButton" to="CanvasLayer" method="_on_call_button_pressed"]
[connection signal="pressed" from="CanvasLayer/Control/Platter/SpongeButton" to="." method="_on_sponge_button_pressed"]
[connection signal="pressed" from="CanvasLayer/Control/Platter/RopeButton" to="." method="_on_rope_button_pressed"]
[connection signal="pressed" from="CanvasLayer/Control/Platter/BellButton" to="." method="_on_bell_button_pressed"]
[connection signal="animation_finished" from="CanvasLayer/Control/AnimationPlayer" to="CanvasLayer" method="_on_animation_player_animation_finished"]
[connection signal="pressed" from="CanvasLayer/Control/Stats/Continue" to="." method="_on_continue_pressed"]
[connection signal="animation_finished" from="LevelAnimations" to="." method="_on_level_animations_animation_finished"]
